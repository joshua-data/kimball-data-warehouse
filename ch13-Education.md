# 🧠 학습 노트: Chapter 13 – 교육 (Education)

## 🎯 핵심 개념 요약

| 주요 주제 | 설명 |
| --- | --- |
| 🎓 교육기관 도메인 | 다양한 기능(기숙사, 식당, 병원 등)을 가진 복합적인 조직. 학생 모집부터 졸업, 이후의 동문 관리까지 전주기를 데이터로 추적 가능. |
| 📊 점진적 스냅샷 팩트 | 프로세스의 상태 변화 마일스톤을 기준으로 지원자 또는 연구보조금 요청의 현재 상태를 추적하는 팩트 테이블 설계. |
| 🔍 팩트 없는 팩트 테이블 | 측정값이 없는 이벤트 발생(또는 미발생)을 추적하는 테이블. 합격, 등록, 출석 여부 등의 이진 상태를 기록. |
| 🚫 발생하지 않은 이벤트 분석 | 누락된 활동(예: 출석하지 않음, 등록 안함 등)을 포착해 분석함. |

---

## 🧩 1. 대학 사례와 버스 매트릭스

- **대학은 작은 도시**처럼 다양한 서비스를 제공.
    - 기숙사, 식당, 서점, 이벤트, 안전, 의료, 재정, R&D, 커리어 등.
- **중요한 분석 관점**:
    - 어떤 학생이 어떤 강좌를 수강?
    - 학문 성취도?
    - 입학 → 졸업 → 동문까지의 여정 전반.
- 👉 **버스 매트릭스**는 교육기관의 데이터 분석의 중심이 되는 프로세스를 테마별로 정리함.

---

## 🧩 2. 점진적 스냅샷 팩트 테이블 (Pipeline 구조 추적용)

### ✅ 정의

- 하나의 로우가 전체 파이프라인 상태 이력을 담고 있음.
- 여러 일자 속성 → 각 마일스톤의 날짜 기록 (예: 지원, 합격, 등록일 등).
- 상태 변화시마다 **로우 갱신(update)**.

### 📌 주요 특성

- 각 단계별 건수, 평균 소요 시간 등 추출 가능.
- **디멘션**: 날짜 (롤플레잉), 지원자(속성 다양), 전공 등.
- **측정값**: 단계별 처리 시간, 등록 확률, 지원 확률 등.

---

## 📚 3. 사례1 – 지원자 파이프라인 (입학 프로세스)

### 🎓 지원자 여정

| 단계 | 예시 날짜 속성 |
| --- | --- |
| 최초 문의 | inquiry_date |
| 캠퍼스 방문 | visit_date |
| 지원서 제출 | application_date |
| 검토 완료 | review_completed_date |
| 합격 여부 통보 | decision_date |
| 등록 또는 취소 | enrollment_date / cancellation_date |
- **그레인**: 가망 학생 1명당 1 row.
- **디멘션** 예시:
    - 지역, 성별, 고등학교, 성적, 예비 전공 등.
- **분석 포인트**:
    - 단계별 병목 파악 (ex. 검토 완료까지 너무 오래 걸리는 경우).
    - 특정 출신 고등학교 학생은 등록률이 높은가?

### 🆚 대안 스키마 설계

| 방식 | 특징 | 사용 용도 |
| --- | --- | --- |
| 점진적 스냅샷 | 가장 최신 상태 유지, 로우 갱신 | 파이프라인 진행 상황 |
| 날짜 기반 스냅샷 | 특정 날짜 기준 스냅샷 저장 | 히스토리 비교, 통계용 |
| 트랜잭션 팩트 | 이벤트 1건당 1 row 삽입 | 세부 이벤트 추적 |

---

## 📚 4. 사례2 – 연구보조금 요청 파이프라인

- **프로세스 예시**:
    - 제안 제출 → 심사 → 승인 → 금액 수령.
- **그레인**: 요청 1건당 1 row.
- **디멘션**:
    - 교수, 부서, 연구 주제 등.
- **측정값**:
    - 단계별 처리 시간, 승인률, 금액 등.

---

## 🧩 5. 팩트 없는 팩트 테이블 (Factless Fact Table)

### ✅ 정의

- **측정값이 없는 팩트 테이블**.
- 단순히 **"발생했는지 여부"**를 기록.

### 🎯 예시

| 케이스 | 목적 |
| --- | --- |
| 출석 기록 | 누가 출석했는지 확인 |
| 수강 등록 | 어떤 학생이 어떤 수업을 들었는지 |
| 시설 이용 | 어떤 학생이 어떤 시설을 사용했는지 |

### 🧠 팁

- 팩트가 없지만, **디멘션 간 관계를 추적**하는 데 유용.
- "등록하지 않은 학생" 같은 **발생하지 않은 이벤트 분석**도 가능.

---

## 🧩 6. 발생하지 않은 이벤트 분석

### ✅ 개념

- 팩트 테이블에 존재하지 **않는 조합**을 찾아내는 분석.
- 예: 합격했지만 등록 안한 학생, 수업을 듣지 않은 등록자 등.

### 🛠️ 구현 방법

- **팩트 없는 테이블 + 디멘션 outer join**.
- WHERE 절에서 NULL 필터링하여 누락 확인.

---

## 📌 요약 정리

| 개념 | 요약 |
| --- | --- |
| 점진적 스냅샷 팩트 | 마일스톤별 상태 일자 기록, 주기적 갱신. |
| 지원자 파이프라인 | 각 단계별 진척 상태, 병목 분석, 특성별 분류 가능. |
| 연구보조금 파이프라인 | 제안 → 승인까지의 전체 수명 주기 분석. |
| 팩트 없는 팩트 테이블 | 이벤트의 존재 여부만 추적, 누락 이벤트 분석에 강점. |
| 발생하지 않은 이벤트 분석 | outer join으로 누락 탐지, 비정상 흐름 진단에 유용. |

---

# 📘 팩트 없는 팩트 테이블 (Factless Fact Table)

---

## ✅ 1. 개념 정의

**팩트 없는 팩트 테이블(Factless Fact Table)** 이란?

- **측정값(숫자형 팩트 컬럼)이 없이 디멘션 키만 존재**하는 특수한 형태의 팩트 테이블
- 주로 **이벤트 발생 여부**나 **디멘션 간 관계를 추적**할 때 사용
- 목적: **이벤트가 발생했는지 여부**, 혹은 **누가 어떤 대상과 관계를 맺고 있는지** 분석

---

## ✅ 2. 전형적인 사용 사례

### 🎓 고등 교육 분야

### 📍 입학 관련 이벤트 추적

- 각 학생이 어떤 입학 이벤트(학교 방문, 캠퍼스 투어 등)에 참석했는지 기록

### 📍 강좌 등록

- 학생이 학기마다 어떤 강좌에 등록했는지 추적
- → 측정값 없이 `학생`, `학기`, `강좌` 디멘션 키만 포함

---

## ✅ 3. 테이블 설계 주요 포인트

### 🎯 팩트 테이블의 그레인 정의

- 예: `학생-강좌-학기` 단위로 한 행

### 🗂 학기 디멘션

- `일자 디멘션`과 연결 필요
- 일자별로 학기 정보(`가을 2023`, `봄 2024`) 포함

### 👤 학생 디멘션

- 입학 시 속성과 학교 생활 중 속성 (예: 전공, 학년 등) 모두 포함
- 변경 이력 추적: `SCD Type 2`, `Type 4 미니 디멘션`, `Type 7 하이브리드 전략` 고려

---

## ✅ 4. 분석에서의 활용

### 📌 수치 팩트 없이도 가능한 분석 예시

- 특정 교수의 강의를 신청한 학생 수?
- 공대생 중 재무 강좌를 수강한 비율?
- 3년간 특정 강좌 수강 이력?

→ 대부분 **카운트 기반(COUNT)** 분석으로 해결

### 📌 SQL 예시

```sql
SELECT faculty, COUNT(term_key)
FROM fact_course_registration
WHERE ...
GROUP BY faculty

```

- `term_key`는 단순 카운트를 위한 키 (실제 어떤 키를 써도 결과 같음)

---

## ✅ 5. 인위적인 건수 지표(Artificial Fact)

### 🎯 문제점

- 팩트가 없기 때문에 COUNT 연산이 직관적이지 않음
- BI 툴에서의 쿼리 자동 생성이나 집계 테이블 설계가 어려움

### 💡 해결 방법

- `registration_count` = 항상 1로 설정된 컬럼 추가
- 장점:
    - SQL 가독성 향상
    - 집계 테이블, OLAP 큐브 설계 시 유리

```sql
SELECT faculty, SUM(registration_count)
FROM fact_course_registration
GROUP BY faculty

```

---

## ✅ 6. 복잡한 관계: 한 강좌에 여러 강의자

### 📍 문제

- 강좌 하나에 여러 강의자가 있을 경우 `다대다 관계` 발생

### 🛠 해결 전략

1. **그레인 확장**: `학기-학생-강좌-강의자` → 중복 카운트 위험
2. **브리지 테이블 사용** (8장/10장 참조)
    - `강좌-강의자` 연결을 별도 브리지로 구성
    - 가중치(강의 분담률) 포함 가능
3. **중복 카운트 처리 주의**
    - 브리지 테이블은 `중복 집계` 유발 가능성 존재
    - 명확한 분담 기준 필요

---

## ✅ 7. 팩트 추가 고려 사항

- 만약 등록 건 외에 다음과 같은 **실제 수치 팩트**가 존재한다면?
    - 예: 수업료, 성적, 학점
    - → 이 경우 해당 테이블은 더 이상 "팩트 없는" 테이블이 아님

---

## 🧠 마무리 요약

| 항목 | 설명 |
| --- | --- |
| 용도 | 디멘션 간의 이벤트 발생 여부 혹은 관계 추적 |
| 팩트 없음 | 측정값 없이 디멘션 키만 존재 |
| 주요 예시 | 강좌 등록, 입학 이벤트 참석, 직원 프로젝트 배정 등 |
| 쿼리 방식 | `COUNT`, 혹은 `SUM(인위적인 팩트)` |
| 설계 유의점 | 디멘션의 이력 관리, 그레인 정의, 중복 관계 해소 |
| 팁 | BI 툴 사용 및 집계 성능 향상을 위해 1로 채워진 인위적인 팩트 컬럼 추가 |